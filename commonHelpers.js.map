{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport bixOctagonSvg from './img/bi_x-octagon.svg';\n\nconst form = document.querySelector('.form');\nconst formInput = document.querySelector('.form-input');\nconst gallery = document.querySelector('.gallery');\nconst loaderAnimation = document.createElement('div');\nloaderAnimation.classList.add('loader');\n\nconst instanceOfLightbox = new simpleLightbox('li a', {\n    captionsData: 'alt',\n    captionClass: 'img-caption',\n    captionDelay: 250,\n});\n\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet currentPage = 1;\nlet userKey = '41929636-e94244ac3daa63b74aaebcf18';\nlet inputQuery = '';\n\nlet isLoading = false;\n\nfunction createGallery(hits, totalHits) {\n    const markup = hits\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) =>\n                `<li class=\"gallery-item\">\n                <a class=\"item-link\" href=\"${largeImageURL}\">\n                    <img\n                        src=\"${webformatURL}\"\n                        alt=\"${tags}\"\n                        width=\"360\"\n                        height=\"200\"\n                    />\n                </a>\n                <ul class=\"mini-list\">\n                    <li class=\"mini-header\">\n                        <h3>Likes</h3>\n                        <p>${likes}</p>\n                    </li>\n                    <li class=\"mini-header\">\n                        <h3>Views</h3>\n                        <p>${views}</p>\n                    </li>\n                    <li class=\"mini-header\">\n                        <h3>Comments</h3>\n                        <p>${comments}</p>\n                    </li>\n                    <li class=\"mini-header\">\n                        <h3>Downloads</h3>\n                        <p>${downloads}</p>\n                    </li>\n                </ul>\n                </li>`\n        )\n        .join('');\n\n    loaderAnimation.remove();\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (currentPage * 40 >= totalHits) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.show({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            color: '#808080',\n            messageColor: '#FAFAFB',\n        });\n    } else {\n        loadMoreBtn.style.display = 'block';\n    }\n\n    instanceOfLightbox.refresh();\n    isLoading = false;\n}\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    form.after(loaderAnimation);\n\n    inputQuery = formInput.value;\n    currentPage = 1;\n\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: userKey,\n                q: inputQuery,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 40,\n            },\n        });\n\n        const { hits, totalHits } = response.data;\n\n        createGallery(hits, totalHits);\n    } catch (error) {\n        loaderAnimation.remove();\n        console.error('Error during API request:', error.response);\n        iziToast.show({\n            message: 'Failed to fetch images. Please try again later.',\n            position: 'topRight',\n            color: '#EF4040',\n            messageColor: '#FAFAFB',\n            iconUrl: bixOctagonSvg,\n        });\n    }\n}\n\nasync function onLoadMore(e) {\n    e.preventDefault();\n\n    if (isLoading) return;\n\n    formInput.value = '';\n    form.after(loaderAnimation);\n\n    try {\n        isLoading = true;\n\n        const scrollPosition = window.scrollY || window.pageYOffset;\n\n        currentPage++;\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: userKey,\n                q: inputQuery,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 40,\n                page: currentPage,\n            },\n        });\n\n        const { hits, totalHits } = response.data;\n        createGallery(hits, totalHits);\n\n        window.scrollTo({\n            top: scrollPosition,\n            behavior: 'smooth',\n        });\n    } catch (error) {\n        loaderAnimation.remove();\n        console.error('Error during API request:', error.response);\n        iziToast.show({\n            message: `${error}`,\n            position: 'topRight',\n            color: '#EF4040',\n            messageColor: '#FAFAFB',\n            iconUrl: bixOctagonSvg,\n        });\n    } finally {\n        isLoading = false;\n    }\n}\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n"],"names":["bixOctagonSvg","form","formInput","gallery","loaderAnimation","instanceOfLightbox","simpleLightbox","loadMoreBtn","currentPage","userKey","inputQuery","isLoading","createGallery","hits","totalHits","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","iziToast","onFormSubmit","e","response","axios","error","onLoadMore","scrollPosition"],"mappings":"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"}